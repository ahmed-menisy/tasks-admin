"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[401],{3401:(K,_,a)=>{a.r(_),a.d(_,{ManageUsersModule:()=>u});var h=a(6895),x=a(9299),v=a(8746),t=a(4650),U=a(529),f=a(526);class c{constructor(s){this._HttpClient=s}getAllUsers(s){let n=new U.LE;return n=n.appendAll(s),this._HttpClient.get(f.N.baseAuth+"auth/users",{params:n})}deleteUser(s){return this._HttpClient.delete(f.N.baseAuth+`auth/user/${s}`)}changeStatus(s){return this._HttpClient.put(f.N.baseAuth+"auth/user-status",s)}}c.\u0275fac=function(s){return new(s||c)(t.LFG(U.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac});var S=a(7185),C=a(3081),T=a(4333),b=a(4859),L=a(284),Z=a(9549),i=a(671),A=a(5326);function w(e,s){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"mUser.tNo")))}function B(e,s){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=s.index;t.xp6(1),t.hij(" ",n+1," ")}}function N(e,s){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"mUser.tName")))}function y(e,s){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.Oqu(n.username)}}function J(e,s){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"mUser.tEmail")," "))}function Y(e,s){if(1&e&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&e){const n=s.$implicit;t.xp6(1),t.Oqu(n.email)}}function M(e,s){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"mUser.tassignedTasks")," "))}function Q(e,s){if(1&e&&(t.TgZ(0,"td",18)(1,"span",19),t._uU(2),t.qZA()()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngClass",n.assignedTasks<0?"badge text-bg-danger":"badge text-bg-primary"),t.xp6(1),t.hij(" ",n.assignedTasks," ")}}function k(e,s){1&e&&(t.TgZ(0,"th",17),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"mUser.tStatus")," "))}const D=function(e,s){return{"text-bg-primary":e,"text-bg-danger":s}};function O(e,s){if(1&e&&(t.TgZ(0,"td",18)(1,"span",20),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA()()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(6,D,"Active"===n.status,"Active"!==n.status)),t.xp6(1),t.hij(" ","Active"===n.status?t.lcZ(3,2,"mUser.tActive"):t.lcZ(4,4,"mUser.tInActive")," ")}}function I(e,s){1&e&&t._UZ(0,"th",17)}function F(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(n);const o=t.oxw().$implicit,r=t.MAs(18),d=t.oxw();return t.KtG(o.assignedTasks<=0?d.changeStatus(o._id,o.status):r.fire())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("disabled",n.stopButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"mUser.tInActiveBtn")," ")}}function j(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(n);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.changeStatus(o._id,o.status))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("disabled",n.stopButton),t.xp6(1),t.hij(" ",t.lcZ(2,2,"mUser.tActiveBtn")," ")}}function H(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"td",18)(1,"div",21)(2,"button",22),t.NdJ("click",function(){const r=t.CHM(n).$implicit,d=t.MAs(6),g=t.MAs(12);return t.KtG("Active"!==r.status&&r.assignedTasks<=0?d.fire():g.fire())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"swal",23,24),t.NdJ("confirm",function(){const o=t.CHM(n),r=o.$implicit,d=o.index,g=t.oxw();return t.KtG(g.deleteUser(r._id,d))}),t.ALo(7,"translate"),t.ALo(8,"translate"),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"swal",25,26),t.ALo(13,"translate"),t.ALo(14,"translate"),t.ALo(15,"translate"),t.YNc(16,F,3,4,"button",27),t._UZ(17,"swal",25,28),t.ALo(19,"translate"),t.ALo(20,"translate"),t.ALo(21,"translate"),t.YNc(22,j,3,4,"button",29),t.qZA()()}if(2&e){const n=s.$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,18,"mUser.tDelete")," "),t.xp6(2),t.hYB("title","",t.lcZ(7,20,"mUser.tSwalTitleDel")," ",n.username,"?"),t.s9C("text",t.lcZ(8,22,"mUser.tSwalText")),t.s9C("confirmButtonText",t.lcZ(9,24,"mUser.tSwalCon")),t.s9C("cancelButtonText",t.lcZ(10,26,"mUser.tSwalCan")),t.Q6J("showCancelButton",!0)("focusCancel",!0),t.xp6(6),t.s9C("title",t.lcZ(13,28,"mUser.tSwalTitleOpps")),t.s9C("text",t.lcZ(14,30,"mUser.tSwalOppsText1")),t.Q6J("confirmButtonText",t.lcZ(15,32,"confirm.ok"))("showCancelButton",!1),t.xp6(5),t.Q6J("ngIf","Active"===n.status),t.xp6(1),t.s9C("title",t.lcZ(19,34,"mUser.tSwalTitleOpps")),t.s9C("text",t.lcZ(20,36,"mUser.tSwalOppsText2")),t.Q6J("confirmButtonText",t.lcZ(21,38,"confirm.ok"))("showCancelButton",!1),t.xp6(5),t.Q6J("ngIf","In-Active"===n.status)}}function q(e,s){1&e&&t._UZ(0,"tr",32)}function $(e,s){1&e&&t._UZ(0,"tr",33)}function P(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"pagination-controls",34),t.NdJ("pageChange",function(o){t.CHM(n);const r=t.oxw();return t.KtG(r.changePage(o))}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.qZA()}2&e&&t.Q6J("previousLabel",t.lcZ(1,2,"mUser.prev"))("nextLabel",t.lcZ(2,4,"mUser.next"))}const R=function(e,s){return{id:"_id",itemsPerPage:10,currentPage:e,totalItems:s}};class p{constructor(s,n,l){this._UsersService=s,this._ToastrService=n,this._TranslateService=l,this.displayedColumns=["position","username","email","assignedTasks","status","action"],this.dataSource=[],this.stopButton=!1,this.page=1,this.total=0,this.paramsFilter={page:this.page,limit:10}}ngOnInit(){this.getUsers()}getUsers(){this._UsersService.getAllUsers(this.paramsFilter).subscribe({next:s=>{this.dataSource=s.users,this.total=s.totalItems}})}deleteUser(s,n){this._UsersService.deleteUser(s).subscribe({next:l=>{this.getUsers(),this._ToastrService.success(this._TranslateService.instant("toaster.delScucess"),this._TranslateService.instant("toaster.titleSucess"))}})}changeStatus(s,n){this.stopButton=!0,this._UsersService.changeStatus({id:s,status:n}).pipe((0,v.x)(()=>{setTimeout(()=>{this.stopButton=!1},2e3)})).subscribe({next:l=>{this.getUsers(),this._ToastrService.success(this._TranslateService.instant("toaster.userChange"),this._TranslateService.instant("toaster.titleSucess"))}})}filterData(s){this.paramsFilter.name=s.target.value,this.paramsFilter.page=1,clearTimeout(this.filterTimeOutRef),this.filterTimeOutRef=setTimeout(()=>{this.getUsers()},1500)}changePage(s){this.paramsFilter.page=s,this.page=s,this.getUsers()}}p.\u0275fac=function(s){return new(s||p)(t.Y36(c),t.Y36(S._W),t.Y36(C.sK))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-users"]],decls:32,vars:16,consts:[[1,"mt-3"],["appearance","outline"],["type","text","matInput","",3,"placeholder","input"],[1,"table-responsive","rounded","shadow"],["mat-table","",1,"mat-elevation-z8","text-nowrap",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","assignedTasks"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mt-3","hstack","justify-content-center"],["id","_id",3,"previousLabel","nextLabel","pageChange",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"hstack","gap-2"],["mat-raised-button","","color","warn",3,"click"],["icon","question",3,"title","text","showCancelButton","focusCancel","confirmButtonText","cancelButtonText","confirm"],["deleteSwal",""],["icon","error",3,"title","text","confirmButtonText","showCancelButton"],["warningSwal",""],["mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],["warningSwalInActive",""],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-header-row",""],["mat-row",""],["id","_id",3,"previousLabel","nextLabel","pageChange"]],template:function(s,n){1&s&&(t.TgZ(0,"header",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"input",2),t.NdJ("input",function(o){return n.filterData(o)}),t.ALo(6,"translate"),t.qZA()()(),t.TgZ(7,"section",3)(8,"table",4),t.ynx(9,5),t.YNc(10,w,3,3,"th",6),t.YNc(11,B,2,1,"td",7),t.BQk(),t.ynx(12,8),t.YNc(13,N,3,3,"th",6),t.YNc(14,y,2,1,"td",7),t.BQk(),t.ynx(15,9),t.YNc(16,J,3,3,"th",6),t.YNc(17,Y,2,1,"td",7),t.BQk(),t.ynx(18,10),t.YNc(19,M,3,3,"th",6),t.YNc(20,Q,3,2,"td",7),t.BQk(),t.ynx(21,11),t.YNc(22,k,3,3,"th",6),t.YNc(23,O,5,9,"td",7),t.BQk(),t.ynx(24,12),t.YNc(25,I,1,0,"th",6),t.YNc(26,H,23,40,"td",7),t.BQk(),t.YNc(27,q,1,0,"tr",13),t.YNc(28,$,1,0,"tr",14),t.ALo(29,"paginate"),t.qZA()(),t.TgZ(30,"footer",15),t.YNc(31,P,3,6,"pagination-controls",16),t.qZA()),2&s&&(t.xp6(3),t.Oqu(t.lcZ(4,6,"mUser.sInput")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,8,"mUser.sInputPlac")),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.xi3(29,10,n.displayedColumns,t.WLB(13,R,n.page,n.total))),t.xp6(3),t.Q6J("ngIf",n.dataSource.length))},dependencies:[h.mk,h.O5,T.LS,b.lW,L.Nt,Z.KE,Z.hX,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,A.q1,T._s,C.X$],styles:["[_nghost-%COMP%]     a{text-decoration:none!important}[_nghost-%COMP%]     table thead tr{background-color:#09c}[_nghost-%COMP%]     table thead tr th{color:#fff}"]});const z=[{path:"",component:p,title:"Users"}];class m{}m.\u0275fac=function(s){return new(s||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[x.Bz.forChild(z),x.Bz]});var E=a(402),G=a(3746);class u{}u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({providers:[c],imports:[h.ez,m,E.q,G.m,A.ii]})}}]);